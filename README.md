# TabView

åŸºäº Electron 22 + Vue 3 çš„å¤šæ ‡ç­¾é¡µæµè§ˆå™¨æ¡†æ¶(æ”¯æŒwin7)ï¼Œæ”¯æŒåµŒå…¥å‰ç«¯é¡¹ç›®æˆ–å›ºå®šç½‘å€ï¼ŒåŒåŸŸ localStorage å…±äº«ï¼Œè‡ªå®šä¹‰ä¸‹è½½ç®¡ç†ã€‚

> Electron 23 å‡çº§åˆ°äº† Chromium 110ã€‚Chromium å®˜æ–¹ä» 109 ç‰ˆæœ¬ä¹‹ååœæ­¢äº†å¯¹ Windows 7/8/8.1 çš„æ”¯æŒã€‚
å› æ­¤ï¼ŒElectron 23 åŠä¹‹åçš„ç‰ˆæœ¬å‡æ— æ³•åœ¨ Windows 7 ä¸Šè¿è¡Œã€‚

## ç‰¹æ€§

- ğŸ–¥ï¸ **å¤šæ ‡ç­¾é¡µ** - ä½¿ç”¨ BrowserView å®ç°çœŸæ­£çš„æµè§ˆå™¨æ ‡ç­¾é¡µæ•ˆæœ
- ğŸ”— **åŒåŸŸå­˜å‚¨å…±äº«** - æ‰€æœ‰æ ‡ç­¾é¡µå…±äº«åŒä¸€ä¸ª sessionï¼ŒlocalStorage è‡ªåŠ¨åŒæ­¥
- ğŸ“¥ **ä¸‹è½½åŠ«æŒ** - è‡ªå®šä¹‰ä¸‹è½½ç®¡ç†å™¨ï¼Œæ”¯æŒè¿›åº¦æ˜¾ç¤ºã€æ–‡ä»¶æ“ä½œ
- ğŸ¨ **Vue 3 ç•Œé¢** - ç°ä»£åŒ–çš„ Vue 3 + ç»„åˆå¼ API æ„å»ºçš„ UI
- ğŸªŸ **ç‹¬ç«‹ä¸‹è½½é¢æ¿** - å­çª—å£å®ç°ï¼Œé¿å…è¢« BrowserView é®æŒ¡
- ğŸ¢ **åµŒå…¥æ”¯æŒ** - æ”¯æŒæœ¬åœ°å¼€å‘æœåŠ¡å™¨æˆ–å›ºå®šç½‘å€
- ğŸªŸ **Win7 å…¼å®¹** - åŸºäº Electron 22ï¼Œæ”¯æŒ Windows 7

## æŠ€æœ¯æ ˆ

| æŠ€æœ¯         | ç‰ˆæœ¬   | è¯´æ˜            |
|------------|------|---------------|
| Electron   | 22.x | æ”¯æŒ Win7 çš„æœ€é«˜ç‰ˆæœ¬ |
| Vue        | 3.x  | ç»„åˆå¼ API       |
| TypeScript | 4.x  | å…¨ç±»å‹æ”¯æŒ         |
| Pinia      | 2.x  | çŠ¶æ€ç®¡ç†          |
| Vite       | 4.x  | æ„å»ºå·¥å…·          |

## é¡¹ç›®ç»“æ„

```
electron-vue-browser/
â”œâ”€â”€ electron/ # Electron ä¸»è¿›ç¨‹
â”‚ â”œâ”€â”€ main.ts # ä¸»å…¥å£
â”‚ â”œâ”€â”€ preload.ts # ä¸»çª—å£ preload
â”‚ â”œâ”€â”€ panel-preload.ts # ä¸‹è½½é¢æ¿ preload
â”‚ â””â”€â”€ managers/
â”‚ â”œâ”€â”€ TabManager.ts # æ ‡ç­¾é¡µç®¡ç†
â”‚ â””â”€â”€ DownloadManager.ts # ä¸‹è½½ç®¡ç†
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ components/
â”‚ â”‚ â”œâ”€â”€ BrowserChrome.vue # æµè§ˆå™¨ä¸»ç•Œé¢
â”‚ â”‚ â””â”€â”€ Icon.vue # SVG å›¾æ ‡ç»„ä»¶
â”‚ â”œâ”€â”€ stores/
â”‚ â”‚ â”œâ”€â”€ tabs.ts # æ ‡ç­¾é¡µçŠ¶æ€
â”‚ â”‚ â””â”€â”€ downloads.ts # ä¸‹è½½çŠ¶æ€
â”‚ â”œâ”€â”€ DownloadPanel.vue # ä¸‹è½½é¢æ¿çª—å£
â”‚ â”œâ”€â”€ App.vue
â”‚ â”œâ”€â”€ main.ts # ä¸»çª—å£å…¥å£
â”‚ â””â”€â”€ panel-main.ts # ä¸‹è½½é¢æ¿å…¥å£
â”œâ”€â”€ index.html
â”œâ”€â”€ download-panel.html
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ postcss.config.js
â””â”€â”€ package.json
```

## å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yourname/tabview.git
cd tabview

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# æ‰“åŒ…åº”ç”¨
npm run electron:build
```

## é…ç½®

### åˆå§‹æ ‡ç­¾é¡µ

åœ¨ electron/main.ts ä¸­ä¿®æ”¹ï¼š

```ts
const urls = [
  'https://github.com',
  'https://vuejs.org',
  'http://localhost:3000'  // ä½ çš„æœ¬åœ°é¡¹ç›®
];

urls.forEach((url, i) => {
  const id = tabManager.createTab(url);
  if (i === 0) tabManager.switchTab(id);
});
```

## Electron22å…¼å®¹æ€§è¯´æ˜

### å·²çŸ¥é™åˆ¶

| ç‰¹æ€§                           | Electron 22 | è§£å†³æ–¹æ¡ˆ                  |
|------------------------------|-------------|-----------------------|
| `getCurrentBytesPerSecond()` | âŒ ä¸å­˜åœ¨       | æ‰‹åŠ¨è®¡ç®—é€Ÿåº¦                |
| `updated` äº‹ä»¶è§¦å‘               | âš ï¸ ä¸ç¨³å®š      | äº‹ä»¶ + è½®è¯¢åŒä¿é™©            |
| `setSavePath` æ—¶æœº             | âš ï¸ å¿…é¡»åŒæ­¥     | å…ˆè®¾ä¸´æ—¶è·¯å¾„ï¼Œå†å¼‚æ­¥ç¡®è®¤          |
| `savePath` å±æ€§                | âŒ åªè¯»        | ä½¿ç”¨ `setSavePath()` æ–¹æ³• |

## ä¸‹è½½æµç¨‹

```plain

will-download äº‹ä»¶
    â†“
e.preventDefault() é˜»æ­¢é»˜è®¤ä¸‹è½½
    â†“
item.setSavePath(tempPath) è®¾ç½®ä¸´æ—¶è·¯å¾„
    â†“
dialog.showSaveDialog() æ˜¾ç¤ºä¿å­˜å¯¹è¯æ¡†
    â†“
ç”¨æˆ·ç¡®è®¤åï¼Œç›‘å¬ updated/done äº‹ä»¶
    â†“
ä¸‹è½½å®Œæˆå ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®
```


## å¼€å‘è®¡åˆ’
[ ] æ ‡ç­¾é¡µæ‹–æ‹½æ’åº
[ ] ä¼šè¯æ¢å¤ï¼ˆé‡å¯åæ¢å¤æ ‡ç­¾é¡µï¼‰
[ ] éšç§æ¨¡å¼ï¼ˆä¸´æ—¶ sessionï¼‰
[ ] æ’ä»¶ç³»ç»Ÿ
[ ] å¤šçª—å£åŒæ­¥
[ ] å†å²è®°å½•
[ ] ä¹¦ç­¾ç®¡ç†